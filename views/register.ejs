<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/styles.css">
    <title>Вход</title>
</head>
<body>
  <nav>
    <p><a href="/"><img id="icon" src="/images/icon.svg"></a>
    <a href="/take-tour"><button id="takeTour">Подобрать тур</button></a></p>
    <% if (user) { %>
      <p><a href="/search"><img id="active" src="/images/search.svg"></a>
      <img id="active" src="/images/profile.svg" onclick="window.location.href='/profile'">
      <button onclick="window.location.href='/logout'">Выйти</button></p>
    <% } else { %>
      <p>
        <a href="/search"><img id="active" src="/images/search.svg"></a>
        <button onclick="window.location.href='/login'">Войти</button>
      </p>
    <% } %>
  </nav>

  <div id="imgIntegration">
    <div class="login-container">
  <h1>Регистрация</h1>
  <form action="/register" method="POST">
      <div class="form-group">
          <input
  type="text"
  id="username"
  name="username"
  placeholder="Логин"
  required
>
      </div>
      <div class="form-group">
          <input
  type="password"
  id="password"
  name="password"
  placeholder="Пароль"
  required
>
      </div>
      <div class="button-group">
          <button type="submit">Зарегистрироваться</button>
          <a href="/login"><button type="button">Войти</button></a>
      </div>
      <% if (error) { %>
        <p style="color:red; text-align:center; margin-top:10px;"><%= error %></p>
      <% } %>
      <p id="validationError" style="color:red; text-align:center; margin-top:10px;"></p>
  </form>
</div>

    <img src="/images/join.jpeg">
    </div>

  <footer>
    <p>©SinkTravel
    <a href="/catalog">Каталог</a>
    <a href="/take-tour">Подобрать тур</a>
    <a href="/search">Поиск</a>
    <a href="/profile">Профиль</a></p>
  </footer>

<script>
  const form = document.querySelector('form');
  const usernameInput = document.getElementById('username');
  const passwordInput = document.getElementById('password');
  const errorBlock = document.getElementById('validationError');

  form.addEventListener('submit', (e) => {
    errorBlock.textContent = '';

    const username = usernameInput.value.trim();
    const password = passwordInput.value;

    // Только английские буквы и цифры
    const usernameRegex = /^[a-zA-Z0-9]+$/;

    if (!usernameRegex.test(username)) {
      e.preventDefault();
      errorBlock.textContent = 'Логин должен содержать только латинские буквы и цифры';
      return;
    }

    if (password.length < 8) {
      e.preventDefault();
      errorBlock.textContent = 'Пароль должен быть не короче 8 символов';
      return;
    }
  });
</script>
</body>
</html>